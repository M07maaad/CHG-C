<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  
  <!-- Title & PWA Manifest -->
  <title>CHG - Clinical Toolkit</title>
  <link rel="manifest" href="manifest.json">
  
  <!-- Apple PWA Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="CHG Toolkit">
  <link rel="apple-touch-icon" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhFzwIoH5I9Dg_dwbN_Kc4B2KdJiTjIVJIc45xnOQ28R2dw75hGSE97vmQpYfXKO1r0qAceEw2kpp78Y_aTgD6YCZfpZiMC8bStPrEDYzOUSUV96h9kYYcS5PD_nAltwlYEL1umN-Z6KjXfyIaFEU-OP4-Ldo6r1V9ZZwfp3AG1YDJYGoOsgWKNcoT3igc4/s192/bc19f2e5-04b9-441b-a4f4-ccf4fe8e8d31.png">

  <!-- Supabase Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <!-- ** NEW: Linking the external CSS file ** -->
  <link rel="stylesheet" href="style.css">

</head>
<body>

  <!-- 
    App Shell: Header
    (Fixed at the top)
  -->
  <header class="app-header">
    <button class="header-button" id="header-back-button" aria-label="Go back">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
    </button>
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhFzwIoH5I9Dg_dwbN_Kc4B2KdJiTjIVJIc45xnOQ28R2dw75hGSE97vmQpYfXKO1r0qAceEw2kpp78Y_aTgD6YCZfpZiMC8bStPrEDYzOUSUV96h9kYYcS5PD_nAltwlYEL1umN-Z6KjXfyIaFEU-OP4-Ldo6r1V9ZZwfp3AG1YDJYGoOsgWKNcoT3igc4/s192/bc19f2e5-04b9-441b-a4f4-ccf4fe8e8d31.png" alt="Logo" class="app-header-logo">
    <h1 id="app-title">CHG Toolkit</h1>

    <div class="header-spacer"></div>
    
    <!-- *** FIXED: Removed 'header-back-button' class. Now uses 'header-button' *** -->
    <button id="dark-mode-toggle" class="header-button" aria-label="Toggle dark mode">
      <!-- Sun Icon (Light Mode) -->
      <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
      <!-- Moon Icon (Dark Mode) -->
      <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    </button>
  </header>

  <!-- 
    App Shell: Content
  -->
  <main class="app-content">

    <!-- 
      View 1: Dashboard
    -->
    <div id="view-dashboard" class="view active">
      <!-- *** NEW: Redesigned Dashboard List *** -->
      <div class="dashboard-list">
        <!-- Heparin -->
        <div class="tool-card" data-nav="heparin">
          <div class="tool-card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.9 2.1a2.4 2.4 0 0 1 2.2 0l1.8 1.1 2.4.4a2.4 2.4 0 0 1 1.7 2.3l-.3 2.5 1.5 1.9a2.4 2.4 0 0 1 0 2.2l-1.5 1.9.3 2.5a2.4 2.4 0 0 1-1.7 2.3l-2.4.4-1.8 1.1a2.4 2.4 0 0 1-2.2 0l-1.8-1.1-2.4-.4a2.4 2.4 0 0 1-1.7-2.3l.3-2.5-1.5-1.9a2.4 2.4 0 0 1 0-2.2l1.5-1.9-.3-2.5a2.4 2.4 0 0 1 1.7-2.3l2.4-.4 1.8-1.1zM12 11V8"></path><line x1="12" y1="16" x2="12" y2="16" stroke-width="3"></line></svg>
          </div>
          <div class="tool-card-info">
            <span class="tool-card-title">Heparin Calculator</span>
            <span class="tool-card-desc">Initial and Maintenance Dosing</span>
          </div>
          <svg class="tool-card-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
        </div>
        <!-- Prophylaxis -->
        <div class="tool-card" data-nav="prophylaxis">
          <div class="tool-card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><path d="M9 12l2 2 4-4"></path></svg>
          </div>
          <div class="tool-card-info">
            <span class="tool-card-title">Stress Ulcer Prophylaxis</span>
            <span class="tool-card-desc">Risk Factor Assessment</span>
          </div>
          <svg class="tool-card-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
        </div>
        <!-- Padua -->
        <div class="tool-card" data-nav="padua">
          <div class="tool-card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path><path d="m9 9.5 2 2 4-4"></path></svg>
          </div>
          <div class="tool-card-info">
            <span class="tool-card-title">Padua (VTE) Score</span>
            <span class="tool-card-desc">Venous Thromboembolism Risk</span>
          </div>
          <svg class="tool-card-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
        </div>
        <!-- IV Infusion -->
        <div class="tool-card" data-nav="iv">
          <div class="tool-card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"></path><path d="M12 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path></svg>
          </div>
          <div class="tool-card-info">
            <span class="tool-card-title">IV Infusion Calculator</span>
            <span class="tool-card-desc">Calculate Pump Rate (mL/hr)</span>
          </div>
          <svg class="tool-card-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
        </div>
        <!-- Renal Dosing -->
        <div class="tool-card" data-nav="renal">
          <div class="tool-card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path><path d="M2 12h20"></path></svg>
          </div>
          <div class="tool-card-info">
            <span class="tool-card-title">Renal Dosing (CrCl)</span>
            <span class="tool-card-desc">Cockcroft-Gault Equation</span>
          </div>
          <svg class="tool-card-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
        </div>
        <!-- Unit Converter -->
        <div class="tool-card" data-nav="converter">
          <div class="tool-card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="6" x2="12" y2="18"></line><polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 1 17 6"></polyline></svg>
          </div>
          <div class="tool-card-info">
            <span class="tool-card-title">Unit Converter</span>
            <span class="tool-card-desc">Convert Mass, Volume, Weight</span>
          </div>
          <svg class="tool-card-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
        </div>
        <!-- Other Scores -->
        <div class="tool-card" data-nav="scores" style="opacity: 0.6; cursor: not-allowed;">
          <div class="tool-card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="m9 14 2 2 4-4"></path></svg>
          </div>
          <div class="tool-card-info">
            <span class="tool-card-title">Other Clinical Scores</span>
            <span class="tool-card-desc">Coming Soon...</span>
          </div>
          <svg class="tool-card-arrow" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
        </div>
      </div>
    </div>
    
    <!-- 
      View 2: Heparin Calculator
    -->
    <!-- *** NOTE: Removed .calculator-view wrapper *** -->
    <div id="view-heparin" class="view">
      <div class="mode-toggle-buttons">
        <button id="heparin-mode-initial" class="mode-btn active">Initial Heparin</button>
        <button id="heparin-mode-maintenance" class="mode-btn">Maintenance Heparin</button>
      </div>
      <form id="heparin-form" class="space-y-4">
        <div class="input-group">
          <label for="heparin-patientName">Patient Name:</label>
          <input type="text" id="heparin-patientName" name="patientName" required>
        </div>
        <div class="input-group">
          <label for="heparin-patientIdentifier">Patient ID / Room No.:</label>
          <input type="text" id="heparin-patientIdentifier" name="patientIdentifier" required>
        </div>
        <div class="input-group">
          <label for="heparin-weight">Patient Weight (kg):</label>
          <input type="number" id="heparin-weight" name="weight" step="0.1" required>
        </div>
        <div class="input-group">
          <label for="heparin-concentration">Heparin Concentration (units/mL):</label>
          <input type="number" id="heparin-concentration" name="heparinConcentration" step="0.1" value="100" required>
        </div>
        
        <!-- Initial Fields -->
        <div id="heparin-initial-fields" class="space-y-4">
          <div class="input-group">
            <label for="heparin-indication">Indication:</label>
            <select id="heparin-indication" name="indication" required>
              <option value="AF">AF (Atrial Fibrillation)</option>
              <option value="Venous thromboembolism">Venous Thromboembolism</option>
              <option value="Acute coronary syndrome">Acute Coronary Syndrome</option>
            </select>
          </div>
        </div>
        
        <!-- Maintenance Fields -->
        <div id="heparin-maintenance-fields" class="hidden space-y-4">
          <div class="input-group">
            <label for="heparin-currentRate">Current Infusion Rate (mL/hour):</label>
            <input type="number" id="heparin-currentRate" name="currentInfusionRate" step="0.1">
          </div>
          <div class="input-group">
            <label for="heparin-currentPtt">Current PTT Value (seconds):</label>
            <input type="number" id="heparin-currentPtt" name="currentPtt" step="0.1">
          </div>
        </div>
        
        <button type="submit" class="btn w-full" id="heparin-calculate-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>
          <span>Calculate</span>
        </button>
      </form>
      <div id="heparin-result-area" class="mt-4"></div>
    </div>
    
    <!-- 
      View 3: Stress Ulcer Prophylaxis
    -->
    <div id="view-prophylaxis" class="view">
      <h2 class="calculator-title">Stress Ulcer Prophylaxis</h2>
      <form id="prophylaxis-form" class="space-y-4">
        <div class="input-group">
          <label for="prophylaxis-patientName">Patient Name:</label>
          <input type="text" id="prophylaxis-patientName" name="patientName" required>
        </div>
        <div class="input-group">
          <label for="prophylaxis-patientIdentifier">Patient ID / Room No.:</label>
          <input type="text" id="prophylaxis-patientIdentifier" name="patientIdentifier" required>
        </div>
        
        <div class="risk-group-heading">High Risk Factors:</div>
        <div class="space-y-2">
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Mechanical Ventilation with no enteral feeding (>48h)"><span>Mechanical Ventilation with no enteral feeding (>48h)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Chronic Liver Disease"><span>Chronic Liver Disease</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Concerning Coagulopathy"><span>Concerning Coagulopathy</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Multiple Trauma, Brain Injury or Spinal Cord"><span>Multiple Trauma, Brain Injury or Spinal Cord</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Burns over 35% of total surface area"><span>Burns over 35% of total surface area</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Organ Transplant"><span>Organ Transplant</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="History of Peptic Ulcer Disease"><span>History of Peptic Ulcer Disease</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Dual Antiplatelet"><span>Dual Antiplatelet</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Septic Shock"><span>Septic Shock</span></label>
        </div>

        <div class="risk-group-heading">Moderate to Low Risk Factors:</div>
        <div class="space-y-2">
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Mechanical Ventilation with enteral nutrition"><span>Mechanical Ventilation with enteral nutrition</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Single Antiplatelet Therapy"><span>Single Antiplatelet Therapy</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Oral Anticoagulation"><span>Oral Anticoagulation</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="SepsIS"><span>Sepsis</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="ICU stay > 7 days"><span>ICU stay > 7 days</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Renal Replacement Therapy"><span>Renal Replacement Therapy</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="High Dose Steroids or Immunosuppressant"><span>High Dose Steroids or Immunosuppressant</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Shock"><span>Shock</span></label>
        </div>
        
        <div id="prophylaxis-result-area" class="mt-4"></div>
        
        <button type="submit" class="btn btn-save w-full" id="prophylaxis-save-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
          <span>Save Result</span>
        </button>
      </form>
    </div>
    
    <!-- 
      View 4: Padua Score
    -->
    <div id="view-padua" class="view">
      <h2 class="calculator-title">Padua (VTE) Score</h2>
      <form id="padua-form" class="space-y-4">
        <div class="input-group">
          <label for="padua-patientName">Patient Name:</label>
          <input type="text" id="padua-patientName" name="patientName" required>
        </div>
        <div class="input-group">
          <label for="padua-patientIdentifier">Patient ID / Room No.:</label>
          <input type="text" id="padua-patientIdentifier" name="patientIdentifier" required>
        </div>
        
        <div class="risk-group-heading">Select Risk Factors:</div>
        <div class="space-y-2">
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Active cancer" data-score="3"><span>Active cancer (+3)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Previous VTE" data-score="3"><span>Previous VTE (+3)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Reduced mobility" data-score="3"><span>Reduced mobility (≥3 days) (+3)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Known thrombophilic condition" data-score="3"><span>Known thrombophilic condition (+3)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Recent trauma/surgery" data-score="2"><span>Recent trauma/surgery (≤1 mo) (+2)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Age > 70" data-score="1"><span>Age > 70 years (+1)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Heart/respiratory failure" data-score="1"><span>Heart/respiratory failure (+1)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Acute MI or ischemic stroke" data-score="1"><span>Acute MI or ischemic stroke (+1)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Acute infection/rheumatologic" data-score="1"><span>Acute infection/rheumatologic (+1)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Obesity (BMI > 30)" data-score="1"><span>Obesity (BMI > 30) (+1)</span></label>
          <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Hormonal treatment" data-score="1"><span>Hormonal treatment (+1)</span></label>
        </div>
        
        <div id="padua-result-area" class="mt-4"></div>
        
        <button type="submit" class="btn btn-save w-full" id="padua-save-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
          <span>Save Score</span>
        </button>
      </form>
    </div>
    
    <!-- 
      View 5: IV Infusion
    -->
    <div id="view-iv" class="view">
      <h2 class="calculator-title">IV Infusion Calculator</h2>
      <form id="iv-form" class="space-y-4">
        <div class="input-group">
          <label for="iv-patientName">Patient Name:</label>
          <input type="text" id="iv-patientName" name="patientName" required>
        </div>
        <div class="input-group">
          <label for="iv-patientIdentifier">Patient ID / Room No.:</label>
          <input type="text" id="iv-patientIdentifier" name="patientIdentifier" required>
        </div>
        <div class="input-group">
          <label for="iv-weight">Patient Weight (kg):</label>
          <input type="number" id="iv-weight" name="weight" step="0.1" required>
        </div>
        <div class="input-group">
          <label for="iv-drugAmount">Total Drug Amount in Solution (mg):</label>
          <input type="number" id="iv-drugAmount" name="drugAmount" step="0.1" required>
        </div>
        <div class="input-group">
          <label for="iv-solutionVolume">Total Solution Volume (mL):</label>
          <input type="number" id="iv-solutionVolume" name="solutionVolume" step="0.1" required>
        </div>
        <div class="input-group">
          <label for="iv-drugDose">Desired Dose:</label>
          <input type="number" id="iv-drugDose" name="drugDose" step="0.01" required>
        </div>
        <div class="input-group">
          <label for="iv-doseUnit">Dose Unit:</label>
          <select id="iv-doseUnit" name="doseUnit" required>
            <option value="mcg/kg/min">mcg/kg/min</option>
            <option value="mcg/min">mcg/min</option>
            <option value="mg/hr">mg/hr</option>
          </select>
        </div>
        
        <button type="submit" class="btn w-full" id="iv-calculate-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>
          <span>Calculate Rate</span>
        </button>
      </form>
      <div id="iv-result-area" class="mt-4"></div>
    </div>
    
    <!-- 
      View 6: Renal Dosing
    -->
    <div id="view-renal" class="view">
      <h2 class="calculator-title">Renal Dosing (CrCl)</h2>
      <form id="renal-form" class="space-y-4">
        <div class="input-group">
          <label for="renal-age">Age (years):</label>
          <input type="number" id="renal-age" name="age" step="1">
        </div>
        <div class="input-group">
          <label for="renal-weight">Weight (kg):</label>
          <input type="number" id="renal-weight" name="weight" step="0.1">
        </div>
        <div class="input-group">
          <label for="renal-creatinine">Serum Creatinine (mg/dL):</label>
          <input type="number" id="renal-creatinine" name="creatinine" step="0.01">
        </div>
        <div class="input-group">
          <label for="renal-gender">Gender:</label>
          <select id="renal-gender" name="gender">
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select>
        </div>
      </form>
      <p class="text-sm text-center text-gray-500 dark:text-gray-400">Result will appear below as you type.</p>
      <div id="renal-result-area" class="mt-4"></div>
    </div>

    <!-- 
      View 7: Other Scores
    -->
    <div id="view-scores" class="view">
      <h2 class="calculator-title">Other Clinical Scores</h2>
      <p class="text-center text-gray-600 dark:text-gray-400 mb-6">More calculators are coming soon.</p>
    </div>
    
    <!-- 
      View 8: Unit Converter
    -->
    <div id="view-converter" class="view">
      <h2 class="calculator-title">Unit Converter</h2>
      <form id="converter-form" class="space-y-4">
        <div class="input-group">
          <label for="converter-fromValue">From Value:</label>
          <input type="number" id="converter-fromValue" name="fromValue" step="any" value="1">
        </div>
        <div class="input-group">
          <label for="converter-fromUnit">From Unit:</label>
          <select id="converter-fromUnit" name="fromUnit">
            <optgroup label="Mass">
              <option value="kg">kg</option>
              <option value="g">g</option>
              <option value="mg">mg</option>
              <option value="mcg">mcg</option>
            </optgroup>
            <optgroup label="Volume">
              <option value="L">L</option>
              <option value="mL">mL</option>
            </optgroup>
            <optgroup label="Weight (Specific)">
              <option value="lbs_kg">Pounds (lbs)</option>
              <option value="kg_lbs">Kilograms (kg)</option>
            </optgroup>
          </select>
        </div>
        <div class="input-group">
          <label for="converter-toValue">To Value:</label>
          <input type="text" id="converter-toValue" name="toValue" disabled class="disabled-input">
        </div>
        <div class="input-group">
          <label for="converter-toUnit">To Unit:</label>
          <select id="converter-toUnit" name="toUnit">
            <optgroup label="Mass">
              <option value="kg">kg</option>
              <option value="g">g</option>
              <option value="mg">mg</option>
              <option value="mcg" selected>mcg</option>
            </optgroup>
            <optgroup label="Volume">
              <option value="L">L</option>
              <option value="mL" selected>mL</option>
            </optgroup>
            <optgroup label="Weight (Specific)">
              <option value="lbs_kg">Kilograms (kg)</option>
              <option value="kg_lbs">Pounds (lbs)</toption>
            </optgroup>
          </select>
        </div>
      </form>
      <p class="text-sm text-center text-gray-500 dark:text-gray-400">Result updates automatically.</p>
    </div>

    <!-- 
      View 9: History
    -->
    <div id="view-history" class="view">
      <!-- *** NEW: Search Bar now has a glass wrapper *** -->
      <div class="search-bar-wrapper">
        <div class="input-group" style="margin-bottom: 0;">
          <label for="history-search">Search by Patient Name:</label>
          <input type="search" id="history-search" class="search-bar" placeholder="Type a name to filter logs...">
        </div>
      </div>
      
      <div id="history-logs-container" class="history-view">
        <!-- Loading message or logs will appear here -->
      </div>
    </div>
    
  </main>

  <!-- 
    App Shell: Bottom Nav
  -->
  <nav class="app-bottom-nav">
    <button id="nav-home" class="nav-button active" data-nav="dashboard" aria-label="Home">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-home"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
      <span>Home</span>
    </button>
    <button id="nav-history" class="nav-button" data-nav="history" aria-label="History">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-history"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M12 7v5l4 2"></path></svg>
      <span>History</span>
    </button>
  </nav>
  
  <!-- 
    Password Prompt Modal
  -->
  <div id="password-prompt" class="hidden">
    <div id="password-modal">
      <h3 class="calculator-title">Access History</h3>
      <p class="text-center text-gray-600 dark:text-gray-400 mb-6">Please enter the password to view logs.</p>
      <form id="password-form" class="space-y-4">
        <div class="input-group">
          <label for="password-input">Password:</label>
          <input type="password" id="password-input" name="password" required>
        </div>
        <button type="submit" class="btn w-full">
          <span>Unlock</span>
        </button>
        <button type="button" id="password-cancel" class="btn w-full" style="background: #64748b;">
          <span>Cancel</span>
        </button>
      </form>
    </div>
  </div>

  <!-- 
    Main Script
  -->
  <script src="index.js" defer></script>

</body>
</html>
