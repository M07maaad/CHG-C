<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  
  <!-- Title & PWA Manifest -->
  <title>CHG - Clinical Toolkit</title>
  <link rel="manifest" href="manifest.json">
  
  <!-- Apple PWA Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="CHG Toolkit">
  <link rel="apple-touch-icon" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhFzwIoH5I9Dg_dwbN_Kc4B2KdJiTjIVJIc45xnOQ28R2dw75hGSE97vmQpYfXKO1r0qAceEw2kpp78Y_aTgD6YCZfpZiMC8bStPrEDYzOUSUV96h9kYYcS5PD_nAltwlYEL1umN-Z6KjXfyIaFEU-OP4-Ldo6r1V9ZZwfp3AG1YDJYGoOsgWKNcoT3igc4/s192/bc19f2e5-04b9-441b-a4f4-ccf4fe8e8d31.png">

  <!-- Supabase Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <!-- Linking the external CSS file -->
  <link rel="stylesheet" href="style.css">

</head>
<body>

  <!-- 
    App Shell: Header
    (Fixed at the top)
  -->
  <header class="app-header">
    <!-- *** FIX: Added 'header-icon-button' class for consistent styling *** -->
    <button class="header-icon-button" id="header-back-button" aria-label="Go back">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
    </button>
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhFzwIoH5I9Dg_dwbN_Kc4B2KdJiTjIVJIc45xnOQ28R2dw75hGSE97vmQpYfXKO1r0qAceEw2kpp78Y_aTgD6YCZfpZiMC8bStPrEDYzOUSUV96h9kYYcS5PD_nAltwlYEL1umN-Z6KjXfyIaFEU-OP4-Ldo6r1V9ZZwfp3AG1YDJYGoOsgWKNcoT3igc4/s192/bc19f2e5-04b9-441b-a4f4-ccf4fe8e8d31.png" alt="Logo" class="app-header-logo">
    <h1 id="app-title">CHG Toolkit</h1>

    <div class="header-spacer"></div>
    
    <!-- *** FIX: Removed 'header-back-button' class, kept 'header-icon-button' to ensure it's visible *** -->
    <button id="dark-mode-toggle" class="header-icon-button" aria-label="Toggle dark mode">
      <!-- Sun Icon (Light Mode) -->
      <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
      <!-- Moon Icon (Dark Mode) -->
      <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    </button>
  </header>

  <!-- 
    App Shell: Content
  -->
  <main class="app-content">

    <!-- 
      View 1: Dashboard
    -->
    <div id="view-dashboard" class="view active">
      <div class="dashboard-grid">
        
        <!-- *** ICON FIX: Heparin (Syringe) *** -->
        <div class="tool-card" data-nav="heparin">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-syringe"><path d="m18 2 4 4"/><path d="m17 7 3-3"/><path d="M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-2.6-2.6c-1-1-1-2.5 0-3.4L15 1"/><path d="m9 15 4-4"/><path d="m5 19 4-4"/><path d="m15 1 4 4"/></svg>
          <span class="tool-card-title">Heparin<br>Calculator</span>
        </div>
        
        <!-- *** ICON FIX: Prophylaxis (Shield-Check) *** -->
        <div class="tool-card" data-nav="prophylaxis">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield-check"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>
          <span class="tool-card-title">Stress Ulcer<br>Prophylaxis</span>
        </div>
        
        <!-- *** ICON FIX: Padua (Lungs) *** -->
        <div class="tool-card" data-nav="padua">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lungs"><path d="M10 16c-3 0-5-2-5-5V4.5A2.5 2.5 0 0 1 7.5 2h0A2.5 2.5 0 0 1 10 4.5V16Z"/><path d="M14 16c3 0 5-2 5-5V4.5A2.5 2.5 0 0 0 16.5 2h0A2.5 2.5 0 0 0 14 4.5V16Z"/><path d="M12 16v6"/><path d="M8 4a4 4 0 0 0-4 4v0"/><path d="M16 4a4 4 0 0 1 4 4v0"/></svg>
          <span class="tool-card-title">Padua (VTE)<br>Score</span>
        </div>
        
        <!-- *** ICON FIX: IV Infusion (Droplet) *** -->
        <div class="tool-card" data-nav="iv">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-droplet"><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-5-5.5c-1.5-1.5-3-3.5-5-5.5S0 8 0 15a7 7 0 0 0 7 7z"/></svg>
          <span class="tool-card-title">IV Infusion<br>Calculator</span>
        </div>
        
        <!-- *** ICON FIX: Renal Dosing (Filter) *** -->
        <div class="tool-card" data-nav="renal">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-filter"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
          <span class="tool-card-title">Renal Dosing<br>(CrCl)</span>
        </div>
        
        <!-- Other Scores (Clipboard-List) -->
        <div class="tool-card" data-nav="scores">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard-list"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>
          <span class="tool-card-title">Other<br>Clinical Scores</span>
        </div>
        
        <!-- *** ICON FIX: Unit Converter (Scale) *** -->
        <div class="tool-card" data-nav="converter">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-scale"><path d="m16 16 3-8 3 8c-.8.9-2 1.5-3.5 1.5-1.5 0-2.7-.6-3.5-1.5Z"/><path d="m2 16 3-8 3 8c-.8.9-2 1.5-3.5 1.5-1.5 0-2.7-.6-3.5-1.5Z"/><path d="M12 3v18"/><path d="M3 7h18"/><path d="M12 15c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3Z"/></svg>
          <span class="tool-card-title">Unit<br>Converter</span>
        </div>
      </div>
    </div>
    
    <!-- 
      View 2: Heparin Calculator
    -->
    <div id="view-heparin" class="view">
      <div class="calculator-view">
        <div class="mode-toggle-buttons">
          <button id="heparin-mode-initial" class="mode-btn active">Initial Heparin</button>
          <button id="heparin-mode-maintenance" class="mode-btn">Maintenance Heparin</button>
        </div>
        <form id="heparin-form" class="space-y-4">
          <div class="input-group">
            <label for="heparin-patientName">Patient Name:</label>
            <input type="text" id="heparin-patientName" name="patientName" required>
          </div>
          <div class="input-group">
            <label for="heparin-patientIdentifier">Patient ID / Room No.:</label>
            <input type="text" id="heparin-patientIdentifier" name="patientIdentifier" required>
          </div>
          <div class="input-group">
            <label for="heparin-weight">Patient Weight (kg):</label>
            <input type="number" id="heparin-weight" name="weight" step="0.1" required>
          </div>
          <div class="input-group">
            <label for="heparin-concentration">Heparin Concentration (units/mL):</label>
            <input type="number" id="heparin-concentration" name="heparinConcentration" step="0.1" value="100" required>
          </div>
          
          <!-- Initial Fields -->
          <div id="heparin-initial-fields" class="space-y-4">
            <div class="input-group">
              <label for="heparin-indication">Indication:</label>
              <select id="heparin-indication" name="indication" required>
                <option value="AF">AF (Atrial Fibrillation)</option>
                <option value="Venous thromboembolism">Venous Thromboembolism</option>
                <option value="Acute coronary syndrome">Acute Coronary Syndrome</option>
              </select>
            </div>
          </div>
          
          <!-- Maintenance Fields -->
          <div id="heparin-maintenance-fields" class="hidden space-y-4">
            <div class="input-group">
              <label for="heparin-currentRate">Current Infusion Rate (mL/hour):</label>
              <input type="number" id="heparin-currentRate" name="currentInfusionRate" step="0.1">
            </div>
            <div class="input-group">
              <label for="heparin-currentPtt">Current PTT Value (seconds):</label>
              <input type="number" id="heparin-currentPtt" name="currentPtt" step="0.1">
            </div>
          </div>
          
          <button type="submit" class="btn w-full" id="heparin-calculate-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>
            <span>Calculate</span>
          </button>
        </form>
        <div id="heparin-result-area" class="mt-4"></div>
      </div>
    </div>
    
    <!-- 
      View 3: Stress Ulcer Prophylaxis
    -->
    <div id="view-prophylaxis" class="view">
      <div class="calculator-view">
        <h2 class="calculator-title">Stress Ulcer Prophylaxis</h2>
        <form id="prophylaxis-form" class="space-y-4">
          <div class="input-group">
            <label for="prophylaxis-patientName">Patient Name:</label>
            <input type="text" id="prophylaxis-patientName" name="patientName" required>
          </div>
          <div class="input-group">
            <label for="prophylaxis-patientIdentifier">Patient ID / Room No.:</label>
            <input type="text" id="prophylaxis-patientIdentifier" name="patientIdentifier" required>
          </div>
          
          <div class="risk-group-heading">High Risk Factors:</div>
          <div class="space-y-2">
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Mechanical Ventilation with no enteral feeding (>48h)"><span>Mechanical Ventilation with no enteral feeding (>48h)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Chronic Liver Disease"><span>Chronic Liver Disease</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Concerning Coagulopathy"><span>Concerning Coagulopathy</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Multiple Trauma, Brain Injury or Spinal Cord"><span>Multiple Trauma, Brain Injury or Spinal Cord</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Burns over 35% of total surface area"><span>Burns over 35% of total surface area</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Organ Transplant"><span>Organ Transplant</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="History of Peptic Ulcer Disease"><span>History of Peptic Ulcer Disease</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Dual Antiplatelet"><span>Dual Antiplatelet</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Septic Shock"><span>Septic Shock</span></label>
          </div>

          <div class="risk-group-heading">Moderate to Low Risk Factors:</div>
          <div class="space-y-2">
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Mechanical Ventilation with enteral nutrition"><span>Mechanical Ventilation with enteral nutrition</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Single Antiplatelet Therapy"><span>Single Antiplatelet Therapy</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Oral Anticoagulation"><span>Oral Anticoagulation</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="SepsIS"><span>Sepsis</span></label> <!-- Fixed typo -->
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="ICU stay > 7 days"><span>ICU stay > 7 days</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Renal Replacement Therapy"><span>Renal Replacement Therapy</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="High Dose Steroids or Immunosuppressant"><span>High Dose Steroids or Immunosuppressant</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Shock"><span>Shock</span></label>
          </div>
          
          <div id="prophylaxis-result-area" class="mt-4"></div>
          
          <button type="submit" class="btn btn-save w-full" id="prophylaxis-save-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
            <span>Save Result</span>
          </button>
        </form>
      </div>
    </div>
    
    <!-- 
      View 4: Padua Score
    -->
    <div id="view-padua" class="view">
      <div class="calculator-view">
        <h2 class="calculator-title">Padua (VTE) Score</h2>
        <form id="padua-form" class="space-y-4">
          <div class="input-group">
            <label for="padua-patientName">Patient Name:</label>
            <input type="text" id="padua-patientName" name="patientName" required>
          </div>
          <div class="input-group">
            <label for="padua-patientIdentifier">Patient ID / Room No.:</label>
            <input type="text" id="padua-patientIdentifier" name="patientIdentifier" required>
          </div>
          
          <div class="risk-group-heading">Select Risk Factors:</div>
          <div class="space-y-2">
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Active cancer" data-score="3"><span>Active cancer (+3)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Previous VTE" data-score="3"><span>Previous VTE (+3)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Reduced mobility" data-score="3"><span>Reduced mobility (≥3 days) (+3)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Known thrombophilic condition" data-score="3"><span>Known thrombophilic condition (+3)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Recent trauma/surgery" data-score="2"><span>Recent trauma/surgery (≤1 mo) (+2)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Age > 70" data-score="1"><span>Age > 70 years (+1)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Heart/respiratory failure" data-score="1"><span>Heart/respiratory failure (+1)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Acute MI or ischemic stroke" data-score="1"><span>Acute MI or ischemic stroke (+1)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Acute infection/rheumatologic" data-score="1"><span>Acute infection/rheumatologic (+1)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Obesity (BMI > 30)" data-score="1"><span>Obesity (BMI > 30) (+1)</span></label>
            <label class="risk-factor-card"><input type="checkbox" name="riskFactor" value="Hormonal treatment" data-score="1"><span>Hormonal treatment (+1)</span></label>
          </div>
          
          <div id="padua-result-area" class="mt-4"></div>
          
          <button type="submit" class="btn btn-save w-full" id="padua-save-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
            <span>Save Score</span>
          </button>
        </form>
      </div>
    </div>
    
    <!-- 
      View 5: IV Infusion
    -->
    <div id="view-iv" class="view">
      <div class="calculator-view">
        <h2 class="calculator-title">IV Infusion Calculator</h2>
        <form id="iv-form" class="space-y-4">
          <div class="input-group">
            <label for="iv-patientName">Patient Name:</label>
            <input type="text" id="iv-patientName" name="patientName" required>
          </div>
          <div class="input-group">
            <label for="iv-patientIdentifier">Patient ID / Room No.:</label>
            <input type="text" id="iv-patientIdentifier" name="patientIdentifier" required>
          </div>
          <div class="input-group">
            <label for="iv-weight">Patient Weight (kg):</label>
            <input type="number" id="iv-weight" name="weight" step="0.1" required>
          </div>
          <div class="input-group">
            <label for="iv-drugAmount">Total Drug Amount in Solution (mg):</label>
            <input type="number" id="iv-drugAmount" name="drugAmount" step="0.1" required>
          </div>
          <div class="input-group">
            <label for="iv-solutionVolume">Total Solution Volume (mL):</label>
            <input type="number" id="iv-solutionVolume" name="solutionVolume" step="0.1" required>
          </div>
          <div class="input-group">
            <label for="iv-drugDose">Desired Dose:</label>
            <input type="number" id="iv-drugDose" name="drugDose" step="0.01" required>
          </div>
          <div class="input-group">
            <label for="iv-doseUnit">Dose Unit:</label>
            <select id="iv-doseUnit" name="doseUnit" required>
              <option value="mcg/kg/min">mcg/kg/min</option>
              <option value="mcg/min">mcg/min</option>
              <option value="mg/hr">mg/hr</option>
            </select>
          </div>
          
          <button type="submit" class="btn w-full" id="iv-calculate-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>
            <span>Calculate Rate</span>
          </button>
        </form>
        <div id="iv-result-area" class="mt-4"></div>
      </div>
    </div>
    
    <!-- 
      View 6: Renal Dosing
    -->
    <div id="view-renal" class="view">
      <div class="calculator-view">
        <h2 class="calculator-title">Renal Dosing (CrCl)</h2>
        <form id="renal-form" class="space-y-4">
          <div class="input-group">
            <label for="renal-age">Age (years):</label>
            <input type="number" id="renal-age" name="age" step="1">
          </div>
          <div class="input-group">
            <label for="renal-weight">Weight (kg):</label>
            <input type="number" id="renal-weight" name="weight" step="0.1">
          </div>
          <div class="input-group">
            <label for="renal-creatinine">Serum Creatinine (mg/dL):</label>
            <input type="number" id="renal-creatinine" name="creatinine" step="0.01">
          </div>
          <div class="input-group">
            <label for="renal-gender">Gender:</label>
            <select id="renal-gender" name="gender">
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
          </div>
        </form>
        <p class="text-sm text-center text-gray-500 dark:text-gray-400">Result will appear below as you type.</p>
        <div id="renal-result-area" class="mt-4"></div>
      </div>
    </div>

    <!-- 
      View 7: Other Scores
    -->
    <div id="view-scores" class="view">
      <div class="calculator-view">
        <h2 class="calculator-title">Other Clinical Scores</h2>
        <p class="text-center text-gray-600 dark:text-gray-400 mb-6">More calculators are coming soon.</p>
        <!-- This can be a list of disabled buttons or links -->
      </div>
    </div>
    
    <!-- 
      View 8: Unit Converter
    -->
    <div id="view-converter" class="view">
      <div class="calculator-view">
        <h2 class="calculator-title">Unit Converter</h2>
        <form id="converter-form" class="space-y-4">
          <div class="input-group">
            <label for="converter-fromValue">From Value:</label>
            <input type="number" id="converter-fromValue" name="fromValue" step="any" value="1">
          </div>
          <div class="input-group">
            <label for="converter-fromUnit">From Unit:</label>
            <select id="converter-fromUnit" name="fromUnit">
              <optgroup label="Mass">
                <option value="kg">kg</option>
                <option value="g">g</option>
                <option value="mg">mg</option>
                <option value="mcg">mcg</option>
              </optgroup>
              <optgroup label="Volume">
                <option value="L">L</option>
                <option value="mL">mL</option>
              </optgroup>
              <optgroup label="Weight (Specific)">
                <option value="lbs_kg">Pounds (lbs)</option>
                <option value="kg_lbs">Kilograms (kg)</option>
              </optgroup>
            </select>
          </div>
          <div class="input-group">
            <label for="converter-toValue">To Value:</label>
            <input type="text" id="converter-toValue" name="toValue" disabled class="disabled-input">
          </div>
          <div class="input-group">
            <label for="converter-toUnit">To Unit:</label>
            <select id="converter-toUnit" name="toUnit">
              <optgroup label="Mass">
                <option value="kg">kg</option>
                <option value="g">g</option>
                <option value="mg">mg</option>
                <option value="mcg" selected>mcg</option>
              </optgroup>
              <optgroup label="Volume">
                <option value="L">L</option>
                <option value="mL" selected>mL</option>
              </optgroup>
              <optgroup label="Weight (Specific)">
                <option value="lbs_kg">Kilograms (kg)</option>
                <option value="kg_lbs">Pounds (lbs)</toption>
              </optgroup>
            </select>
          </div>
        </form>
        <p class="text-sm text-center text-gray-500 dark:text-gray-400">Result updates automatically.</p>
      </div>
    </div>

    <!-- 
      View 9: History
    -->
    <div id="view-history" class="view">
      <!-- ** NEW: Static Search Bar ** -->
      <div class="calculator-view" style="margin-bottom: 1rem; padding: 1rem;">
        <div class="input-group" style="margin-bottom: 0;">
          <label for="history-search">Search by Patient Name:</label>
          <input type="search" id="history-search" class="search-bar" placeholder="Type a name to filter logs...">
        </div>
      </div>
      
      <!-- ** NEW: Dynamic Container for Logs ** -->
      <!-- JS (loadHistoryLogs) will populate this div -->
      <div id="history-logs-container" class="history-view">
        <!-- Loading message or logs will appear here -->
      </div>
    </div>
    
  </main>

  <!-- 
    App Shell: Bottom Nav
    (Fixed at the bottom)
  -->
  <nav class="app-bottom-nav">
    <button id="nav-home" class="nav-button active" data-nav="dashboard" aria-label="Home">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-home"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
      <span>Home</span>
    </button>
    <button id="nav-history" class="nav-button" data-nav="history" aria-label="History">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-history"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M12 7v5l4 2"></path></svg>
      <span>History</span>
    </button>
  </nav>
  
  <!-- 
    Password Prompt Modal
    (Hidden by default, shown by JS)
  -->
  <div id="password-prompt" class="hidden">
    <div id="password-modal">
      <h3 class="calculator-title">Access History</h3>
      <p class="text-center text-gray-600 dark:text-gray-400 mb-6">Please enter the password to view logs.</p>
      <form id="password-form" class="space-y-4">
        <div class="input-group">
          <label for="password-input">Password:</label>
          <input type="password" id="password-input" name="password" required>
        </div>
        <button type="submit" class="btn w-full">
          <span>Unlock</span>
        </button>
        <button type="button" id="password-cancel" class="btn w-full" style="background: #64748b;">
          <span>Cancel</span>
        </button>
      </form>
    </div>
  </div>

  <!-- 
    Main Script
    (Deferred to load after HTML)
  -->
  <script src="index.js" defer></script>

</body>
</html>
